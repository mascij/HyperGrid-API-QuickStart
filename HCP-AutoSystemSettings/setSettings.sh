#!/bin/bash

#Plugin to deploy war file to running webserver for CI/CD demonstration
# __  __     __  __     ______   ______     ______     ______     ______     __     _____
# /\ \_\ \   /\ \_\ \   /\  == \ /\  ___\   /\  == \   /\  ___\   /\  == \   /\ \   /\  __-.
# \ \  __ \  \ \____ \  \ \  _-/ \ \  __\   \ \  __<   \ \ \__ \  \ \  __<   \ \ \  \ \ \/\ \
# \ \_\ \_\  \/\_____\  \ \_\    \ \_____\  \ \_\ \_\  \ \_____\  \ \_\ \_\  \ \_\  \ \____-
#  \/_/\/_/   \/_____/   \/_/     \/_____/   \/_/ /_/   \/_____/   \/_/ /_/   \/_/   \/____/
# jmasci@hypergrid.comma
# https://github.com/mascij

# Set your values in the systemSettings.txt file & keep it in the root directory of this script
# Run the script with the username, password, and IP as parameters i.e. ./setSettings.sh admin@hypercloud.io admin123 10.0.8.47

source systemSettings.txt

user=$1
password=$2
url=$3

curl -sk --user admin@hypercloud.io:admin123 -H "Accept: application/json" -H "Content-type: application/json" -X POST -d '[{"id":"dchq.agent.script.url","inactive":false,"deleted":false,"lockVersion":1,"lastModifiedDate":null,"lastModifiedBy":"admin","createdDate":null,"createdBy":null,"owner":null,"ownerPk":null,"tenant":null,"tenantPk":null,"key":"dchq.agent.script.url","value":"'"$Agent_Location"'","description":"DCHQ agent location","fieldType":null,"lastUpdateUser":"admin","createUser":null,"lastUpdated":1526948924216,"created":null},{"id":"dchq.promocodes","inactive":null,"deleted":null,"lockVersion":null,"lastModifiedDate":null,"lastModifiedBy":null,"createdDate":null,"createdBy":null,"owner":null,"ownerPk":null,"tenant":null,"tenantPk":null,"key":"dchq.promocodes","value":"BASIC","description":"Hosted edition only - comma separated list of codes","fieldType":null,"lastUpdateUser":null,"createUser":null,"lastUpdated":null,"created":null},{"id":"self.register.user","inactive":null,"deleted":null,"lockVersion":null,"lastModifiedDate":null,"lastModifiedBy":null,"createdDate":null,"createdBy":null,"owner":null,"ownerPk":null,"tenant":null,"tenantPk":null,"key":"self.register.user","value":"No","description":"Enables User Sign up from Home page","fieldType":null,"lastUpdateUser":null,"createUser":null,"lastUpdated":null,"created":null},{"id":"self.register.tenant","inactive":null,"deleted":null,"lockVersion":null,"lastModifiedDate":null,"lastModifiedBy":null,"createdDate":null,"createdBy":null,"owner":null,"ownerPk":null,"tenant":null,"tenantPk":null,"key":"self.register.tenant","value":"No","description":"Enables Tenant Sign up from Home page","fieldType":null,"lastUpdateUser":null,"createUser":null,"lastUpdated":null,"created":null},{"id":"dchq.agent.connect.port","inactive":null,"deleted":null,"lockVersion":null,"lastModifiedDate":null,"lastModifiedBy":null,"createdDate":null,"createdBy":null,"owner":null,"ownerPk":null,"tenant":null,"tenantPk":null,"key":"dchq.agent.connect.port","value":"'"$RabbitMQ_Port"'","description":"DCHQ RabbitMQ port","fieldType":null,"lastUpdateUser":null,"createUser":null,"lastUpdated":null,"created":null},{"id":"infra.manager.endpoints","inactive":null,"deleted":null,"lockVersion":null,"lastModifiedDate":null,"lastModifiedBy":null,"createdDate":null,"createdBy":null,"owner":null,"ownerPk":null,"tenant":null,"tenantPk":null,"key":"infra.manager.endpoints","value":"","description":"Comma separated values.","fieldType":null,"lastUpdateUser":null,"createUser":null,"lastUpdated":null,"created":null},{"id":"firewall.blueprint.id","inactive":null,"deleted":null,"lockVersion":null,"lastModifiedDate":null,"lastModifiedBy":null,"createdDate":null,"createdBy":null,"owner":null,"ownerPk":null,"tenant":null,"tenantPk":null,"key":"firewall.blueprint.id","value":"","description":"Firewall VM Blueprint Id","fieldType":null,"lastUpdateUser":null,"createUser":null,"lastUpdated":null,"created":null},{"id":"dchq.title.logo","inactive":null,"deleted":null,"lockVersion":null,"lastModifiedDate":null,"lastModifiedBy":null,"createdDate":null,"createdBy":null,"owner":null,"ownerPk":null,"tenant":null,"tenantPk":null,"key":"dchq.title.logo","value":"","description":"Customizable title logo","fieldType":null,"lastUpdateUser":null,"createUser":null,"lastUpdated":null,"created":null},{"id":"dchq.title.color","inactive":null,"deleted":null,"lockVersion":null,"lastModifiedDate":null,"lastModifiedBy":null,"createdDate":null,"createdBy":null,"owner":null,"ownerPk":null,"tenant":null,"tenantPk":null,"key":"dchq.title.color","value":"","description":"Customizable title color","fieldType":null,"lastUpdateUser":null,"createUser":null,"lastUpdated":null,"created":null},{"id":"dchq.title","inactive":null,"deleted":null,"lockVersion":null,"lastModifiedDate":null,"lastModifiedBy":null,"createdDate":null,"createdBy":null,"owner":null,"ownerPk":null,"tenant":null,"tenantPk":null,"key":"dchq.title","value":"'"$Customizable_Title"'","description":"Customizable title","fieldType":null,"lastUpdateUser":null,"createUser":null,"lastUpdated":null,"created":null},{"id":"hyperForm.edition","inactive":null,"deleted":null,"lockVersion":null,"lastModifiedDate":null,"lastModifiedBy":null,"createdDate":null,"createdBy":null,"owner":null,"ownerPk":null,"tenant":null,"tenantPk":null,"key":"HyperCloud.edition","value":"Enterprise Edition","description":"","fieldType":"readonly","lastUpdateUser":null,"createUser":null,"lastUpdated":null,"created":null},{"id":"dchq.win.agent.script.url","inactive":false,"deleted":false,"lockVersion":1,"lastModifiedDate":null,"lastModifiedBy":"admin","createdDate":null,"createdBy":null,"owner":null,"ownerPk":null,"tenant":null,"tenantPk":null,"key":"dchq.win.agent.script.url","value":"'"$Agent_for_Windows"'","description":"DCHQ Agent for Windows","fieldType":null,"lastUpdateUser":"admin","createUser":null,"lastUpdated":1526948924041,"created":null},{"id":"skynet.url","inactive":null,"deleted":null,"lockVersion":null,"lastModifiedDate":null,"lastModifiedBy":null,"createdDate":null,"createdBy":null,"owner":null,"ownerPk":null,"tenant":null,"tenantPk":null,"key":"skynet.url","value":null,"description":"skynet url","fieldType":null,"lastUpdateUser":null,"createUser":null,"lastUpdated":null,"created":null},{"id":"skynet.user","inactive":null,"deleted":null,"lockVersion":null,"lastModifiedDate":null,"lastModifiedBy":null,"createdDate":null,"createdBy":null,"owner":null,"ownerPk":null,"tenant":null,"tenantPk":null,"key":"skynet.user","value":null,"description":"skynet user","fieldType":null,"lastUpdateUser":null,"createUser":null,"lastUpdated":null,"created":null},{"id":"skynet.password","inactive":null,"deleted":null,"lockVersion":null,"lastModifiedDate":null,"lastModifiedBy":null,"createdDate":null,"createdBy":null,"owner":null,"ownerPk":null,"tenant":null,"tenantPk":null,"key":"skynet.password","value":null,"description":"skynet password","fieldType":null,"lastUpdateUser":null,"createUser":null,"lastUpdated":null,"created":null},{"id":"dchq.proxy.script.url","inactive":false,"deleted":false,"lockVersion":1,"lastModifiedDate":null,"lastModifiedBy":"admin","createdDate":null,"createdBy":null,"owner":null,"ownerPk":null,"tenant":null,"tenantPk":null,"key":"dchq.proxy.script.url","value":"'"$Proxy_URL"'","description":"DCHQ Proxy URL","fieldType":null,"lastUpdateUser":"admin","createUser":null,"lastUpdated":1526948924088,"created":null},{"id":"hyperForm.version","inactive":false,"deleted":false,"lockVersion":1,"lastModifiedDate":null,"lastModifiedBy":"admin","createdDate":null,"createdBy":null,"owner":null,"ownerPk":null,"tenant":null,"tenantPk":null,"key":"HyperCloud.version","value":"5.0.0.6970","description":"","fieldType":"readonly","lastUpdateUser":"admin","createUser":null,"lastUpdated":1526948924172,"created":null},{"id":"dchq.base.url","inactive":false,"deleted":false,"lockVersion":1,"lastModifiedDate":null,"lastModifiedBy":"admin","createdDate":null,"createdBy":null,"owner":null,"ownerPk":null,"tenant":null,"tenantPk":null,"key":"dchq.base.url","value":"'"$Base_URL"'","description":"DCHQ base url, this is used in notification and emails e.g. https://dchq.io","fieldType":null,"lastUpdateUser":"admin","createUser":null,"lastUpdated":1526948924201,"created":null},{"id":"dchq.agent.connect.ip","inactive":false,"deleted":false,"lockVersion":1,"lastModifiedDate":null,"lastModifiedBy":"admin","createdDate":null,"createdBy":null,"owner":null,"ownerPk":null,"tenant":null,"tenantPk":null,"key":"dchq.agent.connect.ip","value":"'"$RabbitMQ_IP"'","description":"DCHQ RabbitMQ ip/hostname","fieldType":null,"lastUpdateUser":"admin","createUser":null,"lastUpdated":1526948924209,"created":null}]' https://$url/api/appconfig/save-all?setting_id=
